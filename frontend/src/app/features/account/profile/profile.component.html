<div class="p-4">
  <button
    class="bg-sky-600 hover:bg-sky-700 transition duration-200 text-white font-semibold rounded-lg px-4 py-2 flex items-center gap-2 shadow-md"
    (click)="showDialog()"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke-width="1.5"
      stroke="currentColor"
      class="w-6 h-6"
    >
      <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
    </svg>
    <span>Adaugă Proiect</span>
  </button>

  <p-dialog
    header="Adaugă Proiect"
    [modal]="true"
    [(visible)]="visible"
    [style]="{ width: '30rem' }"
    class="rounded-lg shadow-lg"
  >
    <span class="p-text-secondary block mb-4 text-gray-600">Introdu detaliile proiectului.</span>
    <form [formGroup]="projectForm" (ngSubmit)="onSubmit()" class="space-y-4">
      <div class="flex flex-col">
        <label for="denumireActivitate" class="font-medium">Denumire Activitate:</label>
        <input pInputText type="text" id="denumireActivitate" formControlName="denumireaActivitatii" class="p-inputtext w-full" />
      </div>
      <div class="flex flex-col">
        <label for="descriereaActivitatii" class="font-medium">Descrierea Activității:</label>
        <textarea pInputTextarea id="descriereaActivitatii" formControlName="descriereaActivitatii" class="p-inputtext w-full"></textarea>
      </div>
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label for="pozitiaInProiect" class="font-medium">Poziția În Proiect:</label>
          <input pInputText type="text" id="pozitiaInProiect" formControlName="pozitiaInProiect" class="p-inputtext w-full" />
        </div>
        <div>
          <label for="categoriaExpertului" class="font-medium">Categoria Expertului:</label>
          <input pInputText type="text" id="categoriaExpertului" formControlName="categoriaExpertului" class="p-inputtext w-full" />
        </div>
      </div>
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label for="denumireBeneficiar" class="font-medium">Denumire Beneficiar:</label>
          <input pInputText type="text" id="denumireBeneficiar" formControlName="denumireBeneficiar" class="p-inputtext w-full" />
        </div>
        <div>
          <label for="titluProiect" class="font-medium">Titlu Proiect:</label>
          <input pInputText type="text" id="titluProiect" formControlName="titluProiect" class="p-inputtext w-full" />
        </div>
      </div>
      <div class="flex flex-col">
        <label for="codProiect" class="font-medium">Cod Proiect:</label>
        <input pInputText type="text" id="codProiect" formControlName="codProiect" class="p-inputtext w-full" />
      </div>
      <button type="submit" class="bg-green-600 hover:bg-green-700 text-white rounded-lg px-4 py-2 font-semibold shadow-md">Salvează</button>
    </form>
  </p-dialog>
</div>

<div class="grid grid-cols-1 gap-4">
  @for (project of projects; track $index) {
    <p-card class="text-center">
      <div class="p-4 space-y-2">
        <div><strong>Denumire:</strong> {{ project.denumireaActivitatii }}</div>
        <div><strong>Descriere:</strong> {{ project.descriereaActivitatii }}</div>
        <div><strong>Poziție:</strong> {{ project.pozitiaInProiect }}</div>
        <div><strong>Categorie Expert:</strong> {{ project.categoriaExpertului }}</div>
        <div><strong>Beneficiar:</strong> {{ project.denumireBeneficiar }}</div>
        @if (project.titluProiect) {
          <div><strong>Titlu Proiect:</strong> {{ project.titluProiect }}</div>
        }
        @if (project.codProiect) {
          <div><strong>Cod Proiect:</strong> {{ project.codProiect }}</div>
        }
        <button (click)="deleteProject(project.id)" class="bg-red-600 hover:bg-red-700 text-white rounded-lg px-4 py-2 font-semibold shadow-md mt-2">Șterge</button>
      </div>
    </p-card>
  }
</div>

<p-toast position="bottom-right" />
